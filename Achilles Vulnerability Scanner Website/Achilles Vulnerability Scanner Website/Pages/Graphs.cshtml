@page
@model Achilles_Vulnerability_Scanner_Website.Pages.GraphsModel
@{
    <h1>Graphs and Charts</h1>

    //<!--Load the AJAX API-->
    //<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    //<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    ////<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    //<script type="text/javascript">

    //  // Load the Visualization API and the corechart package.
    //  google.load("visualization", "1", { packages: ["corechart"], });

    //  // Set a callback to run when the Google Visualization API is loaded.
    //  google.setOnLoadCallback(drawChart);
    //        // Callback that creates and populates a data table,
    //  // instantiates the pie chart, passes in the data and draws it.
    //function drawChart() {
    //     // Set chart options
    //    var options = {
    //        title:'What Operating Systems are used on the network',
    //        height: 550,
    //        width: 1100,
    //        pointSize: 5;
    //    };   
    //    //'@Url.Action("GraphsModel","GetOSChartData")'
    //  //Fill the chart with database data
    //  $.ajax(
    //  {  
    //        type: "POST",  
    //        url: "GraphsModel", 
    //        data: '{}',  
    //        contentType: "application/json; charset=utf-8",
    //        dataType: "json",              
    //        success: function (response)
    //        {  
    //            var data = google.visualization.arrayToDataTable(response.d);
    //            var OSchart = new google.visualization.ColumnChart($("#OSchart")[0]);
    //            OSchart.draw(data, options);
    //        },  
    //        failure: function (response) {
    //            alert("Error loading data! Please try again.");
    //        },
    //        error: function (response)
    //        {  
    //            alert("Error loading data! Please try again.");  
    //        }  
    //  });  
    //}

    //</script>

    //<div class="text-center">
    //    <div class="card">
    //        <div class="card-header">What Operating Systems are used on the network</div>
    //        <div class="chart-container">
    //            <canvas id="bar-chart" width="100" height="300"></canvas>
    //        </div>                     
    //    </div>
    // </div>

    // //<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    // <script src="lib/chartjs/chart.min.js"></script> 

    //<script>
    //    var ScanOS = [];
    //    var IsOSOutdated = [];

    //    @if (Model.OSData.Count > 0)
    //    {
    //        foreach (var item in Model.OSData)
    //        {
    //            @:ScanOS.push('@item.ScanOS');
    //            @:IsOSOutdated.push('@item.IsOSOutdated');
    //        }
    //    }

    //    var datasetvalues = {
    //        labels: OS, // x-azis label values
    //        datasets: [Device] // y-axis
    //    };

    //    barChartOptions = {
    //        indexAxis: 'x',
    //        responsive: true,
    //        maintainAspectRatio: false,
    //        scales: {
    //            x: {
    //                barPercentage: 1,
    //                categoryPercentage: 0.6,
    //            },
    //            y: {
    //                barPercentage: 1,
    //                categoryPercentage: 0.6,
    //                ticks: {
    //                    beginAtZero: true
    //                }
    //            }
    //        },
    //        plugins: {
    //            title: {
    //                display: true,
    //                text: 'What Operating Systems are used on the network'
    //            }
    //        }
    //    }

    //    var verticalBarChart = new Chart(
    //        document.getElementById('bar-chart').getContext('2d'), {
    //        type: 'bar',
    //        data: datasetvalues,
    //        options: barChartOptions
    //    });
    //</Script>
    //<body>
    //<!--Div that will hold the pie chart-->
    // <div id="OSchart" style="width: 900px; height: 500px;">
    //</body>

    <canvas id="canvas" width="400" height="400"></canvas>
    @section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js" integrity="sha256-qSIshlknROr4J8GMHRlW3fGKrPki733tLq+qeMCR05Q=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js" integrity="sha256-xKeoJ50pzbUGkpQxDYHD7o7hxe0LaOGeguUidbq6vis=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.css" integrity="sha256-IvM9nJf/b5l2RoebiFno92E5ONttVyaEEsdemDC6iQA=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js" integrity="sha256-arMsf+3JJK2LoTGqxfnuJPFTU4hAK57MtIPdFpiHXOU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" integrity="sha256-aa0xaJgmK/X74WM224KMQeNQC2xYKwlAt08oZqjeF0E=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" integrity="sha256-Uv9BNBucvCPipKQ2NS9wYpJmi8DTOEfTA/nH2aoJALw=" crossorigin="anonymous"></script>
    <script>
        function GetJSON_Simple() {
          var resp = [];
              $.ajax({
                  type: "GET",
                  url: '/Jobs/Index',
                  async: false,
                  contentType: "application/json",
                  success: function (data) {
                      resp.push(data);
                  },
                  error: function (req, status, error) {
                      // do something with error
                      alert("error");
                  }
              });
          return resp;
     }
        var simpleData = GetJSON_Simple();
        var ctx = document.getElementById("canvas")
        var lineChartData = {
            labels: simpleData[0].myDate, 
            datasets: [{
                label: 'OS',
                borderColor: "MediumSeaGreen",
                backgroundColor: "MediumSeaGreen",
                fill: false,
                data:   simpleData[0].mySuccess,
                yAxisID: 'y-axis-1',
            }, {
                label: 'Is OS Outdated?',
                borderColor: "Tomato",
                backgroundColor: "Tomato",
                fill: false,
                data: simpleData[0].myException,
                yAxisID: 'y-axis-2'
            }]
        };

        window.myLine = Chart.Line(ctx, {
            data: lineChartData,
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: 'Processes'
                },
                scales: {
                    yAxes: [{
                        type: 'linear',
                        display: true,
                        position: 'left',
                        id: 'y-axis-1',
                    }, {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        id: 'y-axis-2',

                        // grid line settings
                        gridLines: {
                            drawOnChartArea: false, // only want the grid lines for one axis to show up
                        },
                    }],
                }
            }
        });

    </script>
}
}
